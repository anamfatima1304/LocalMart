{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\WAD Project\\\\LocalMart\\\\frontend\\\\src\\\\components\\\\Buyer\\\\buyer-dashboard\\\\ExploreShopsContent.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { Heart, Search, Filter, Star, MapPin, ShoppingCart, Plus, Minus, X } from \"lucide-react\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport OrderConfirmation from \"./OrderConfirmation\";\nimport { orderService } from \"../../../services/orderService\";\nimport \"../buyer.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst categories1 = [{\n  name: \"Food\",\n  img: \"https://via.placeholder.com/64\"\n}, {\n  name: \"Clothing\",\n  img: \"https://via.placeholder.com/64\"\n}, {\n  name: \"Electronics\",\n  img: \"https://via.placeholder.com/64\"\n}, {\n  name: \"Books\",\n  img: \"https://via.placeholder.com/64\"\n}, {\n  name: \"Crafts\",\n  img: \"https://via.placeholder.com/64\"\n}, {\n  name: \"Essentials\",\n  img: \"https://via.placeholder.com/64\"\n}];\n\n// Random shop images\nconst shopImages = [\"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop\", \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop\", \"https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400&h=300&fit=crop\", \"https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=400&h=300&fit=crop\", \"https://images.unsplash.com/photo-1559329007-40df8a9345d8?w=400&h=300&fit=crop\", \"https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=300&fit=crop\", \"https://images.unsplash.com/photo-1537047902294-62a40c20a6ae?w=400&h=300&fit=crop\"];\n\n// const OrderConfirmation = ({\n//     cartItems,\n//     shopData,\n//     onOrderSuccess,\n//     onCancel\n//   }) => {\n//     const [loading, setLoading] = useState(false);\n//     const [error, setError] = useState('');\n\n//     // Form state\n//     const [deliveryAddress, setDeliveryAddress] = useState({\n//       hostelName: '',\n//       roomNumber: '',\n//       landmark: '',\n//       phoneNumber: ''\n//     });\n\n//     const [deliveryTime, setDeliveryTime] = useState('');\n//     const [paymentMethod, setPaymentMethod] = useState('cash_on_delivery');\n//     const [specialInstructions, setSpecialInstructions] = useState('');\n\n//     // Calculate totals\n//     const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n//     const deliveryFee = subtotal > 200 ? 0 : 20;\n//     const totalAmount = subtotal + deliveryFee;\n\n//     const handleConfirmOrder = async () => {\n//       try {\n//         setLoading(true);\n//         setError('');\n\n//         // Validate form\n//         if (!deliveryAddress.hostelName || !deliveryAddress.roomNumber ||\n//             !deliveryAddress.phoneNumber || !deliveryTime) {\n//           setError('Please fill in all required fields');\n//           return;\n//         }\n\n//         // Prepare order data\n//         const orderData = {\n//           shopId: shopData._id,\n//           items: cartItems.map(item => ({\n//             productId: item.productId || item._id,\n//             quantity: item.quantity,\n//             specialInstructions: item.specialInstructions || ''\n//           })),\n//           deliveryAddress,\n//           deliveryTime,\n//           paymentMethod,\n//           specialInstructions\n//         };\n\n//         // Create order\n//         const result = await orderService.createOrder(orderData);\n\n//         if (result.success) {\n//           onOrderSuccess(result.data);\n//         } else {\n//           setError(result.message || 'Failed to create order');\n//         }\n\n//       } catch (err) {\n//         setError(err.message || 'Something went wrong. Please try again.');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     return (\n//       <div className=\"order-confirmation-modal\">\n//         <div className=\"modal-content\">\n//           <h2>Confirm Your Order</h2>\n\n//           {error && (\n//             <div className=\"error-message\">\n//               {error}\n//             </div>\n//           )}\n\n//           {/* Order Summary */}\n//           <div className=\"order-summary\">\n//             <h3>Order Summary</h3>\n//             <div className=\"shop-info\">\n//               <strong>{shopData.name}</strong>\n//               <span className=\"category\">{shopData.category}</span>\n//             </div>\n\n//             <div className=\"items-list\">\n//               {cartItems.map((item, index) => (\n//                 <div key={index} className=\"order-item\">\n//                   <span className=\"item-name\">{item.name}</span>\n//                   <span className=\"item-details\">\n//                     {item.quantity} × ₹{item.price} = ₹{item.quantity * item.price}\n//                   </span>\n//                 </div>\n//               ))}\n//             </div>\n\n//             <div className=\"price-breakdown\">\n//               <div className=\"price-row\">\n//                 <span>Subtotal:</span>\n//                 <span>₹{subtotal}</span>\n//               </div>\n//               <div className=\"price-row\">\n//                 <span>Delivery Fee:</span>\n//                 <span>₹{deliveryFee}</span>\n//               </div>\n//               <div className=\"price-row total\">\n//                 <strong>\n//                   <span>Total:</span>\n//                   <span>₹{totalAmount}</span>\n//                 </strong>\n//               </div>\n//             </div>\n//           </div>\n\n//           {/* Delivery Details Form */}\n//           <div className=\"delivery-details\">\n//             <h3><MapPin size={20} /> Delivery Details</h3>\n\n//             <div className=\"form-group\">\n//               <label>Hostel Name *</label>\n//               <input\n//                 type=\"text\"\n//                 value={deliveryAddress.hostelName}\n//                 onChange={(e) => setDeliveryAddress(prev => ({\n//                   ...prev,\n//                   hostelName: e.target.value\n//                 }))}\n//                 placeholder=\"e.g., Hostel A\"\n//                 required\n//               />\n//             </div>\n\n//             <div className=\"form-row\">\n//               <div className=\"form-group\">\n//                 <label>Room Number *</label>\n//                 <input\n//                   type=\"text\"\n//                   value={deliveryAddress.roomNumber}\n//                   onChange={(e) => setDeliveryAddress(prev => ({\n//                     ...prev,\n//                     roomNumber: e.target.value\n//                   }))}\n//                   placeholder=\"e.g., 201\"\n//                   required\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Phone Number *</label>\n//                 <input\n//                   type=\"tel\"\n//                   value={deliveryAddress.phoneNumber}\n//                   onChange={(e) => setDeliveryAddress(prev => ({\n//                     ...prev,\n//                     phoneNumber: e.target.value\n//                   }))}\n//                   placeholder=\"Your contact number\"\n//                   required\n//                 />\n//               </div>\n//             </div>\n\n//             <div className=\"form-group\">\n//               <label>Landmark (Optional)</label>\n//               <input\n//                 type=\"text\"\n//                 value={deliveryAddress.landmark}\n//                 onChange={(e) => setDeliveryAddress(prev => ({\n//                   ...prev,\n//                   landmark: e.target.value\n//                 }))}\n//                 placeholder=\"Near library, Ground floor, etc.\"\n//               />\n//             </div>\n//           </div>\n\n//           {/* Delivery Time */}\n//           <div className=\"delivery-time\">\n//             <h3><Clock size={20} /> Preferred Delivery Time</h3>\n//             <input\n//               type=\"time\"\n//               value={deliveryTime}\n//               onChange={(e) => setDeliveryTime(e.target.value)}\n//               required\n//             />\n//           </div>\n\n//           {/* Payment Method */}\n//           <div className=\"payment-method\">\n//             <h3><CreditCard size={20} /> Payment Method</h3>\n//             <div className=\"payment-options\">\n//               <label>\n//                 <input\n//                   type=\"radio\"\n//                   value=\"cash_on_delivery\"\n//                   checked={paymentMethod === 'cash_on_delivery'}\n//                   onChange={(e) => setPaymentMethod(e.target.value)}\n//                 />\n//                 Cash on Delivery\n//               </label>\n//               <label>\n//                 <input\n//                   type=\"radio\"\n//                   value=\"upi\"\n//                   checked={paymentMethod === 'upi'}\n//                   onChange={(e) => setPaymentMethod(e.target.value)}\n//                 />\n//                 UPI Payment\n//               </label>\n//             </div>\n//           </div>\n\n//           {/* Special Instructions */}\n//           <div className=\"special-instructions\">\n//             <h3><FileText size={20} /> Special Instructions (Optional)</h3>\n//             <textarea\n//               value={specialInstructions}\n//               onChange={(e) => setSpecialInstructions(e.target.value)}\n//               placeholder=\"Any special requests or instructions for your order...\"\n//               rows={3}\n//             />\n//           </div>\n\n//           {/* Action Buttons */}\n//           <div className=\"action-buttons\">\n//             <button\n//               onClick={onCancel}\n//               className=\"cancel-btn\"\n//               disabled={loading}\n//             >\n//               Cancel\n//             </button>\n//             <button\n//               onClick={handleConfirmOrder}\n//               className=\"confirm-btn\"\n//               disabled={loading}\n//             >\n//               {loading ? (\n//                 <>\n//                   <div className=\"spinner\" />\n//                   Creating Order...\n//                 </>\n//               ) : (\n//                 <>\n//                   <ShoppingCart size={16} />\n//                   Confirm Order - ₹{totalAmount}\n//                 </>\n//               )}\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//     );\n//   };\n\n// USER-SPECIFIC FAVORITES MANAGEMENT FUNCTIONS\nconst getCurrentUserId = () => {\n  // Option 1: If you store user info in localStorage\n  const user = localStorage.getItem(\"user\");\n  if (user) {\n    const userData = JSON.parse(user);\n    return userData.id || userData._id || userData.userId;\n  }\n\n  // Option 2: If you store just the user ID\n  return localStorage.getItem(\"userId\");\n\n  // Option 3: If you use a different auth system, adjust accordingly\n  // return sessionStorage.getItem('userId');\n  // return getCurrentUser()?.id; // if using a context or auth hook\n};\nconst getFavorites = () => {\n  const userId = getCurrentUserId();\n  if (!userId) return [];\n  const favoritesKey = `favoriteShops_${userId}`;\n  const favorites = localStorage.getItem(favoritesKey);\n  return favorites ? JSON.parse(favorites) : [];\n};\nconst saveFavorites = favorites => {\n  const userId = getCurrentUserId();\n  if (!userId) return;\n  const favoritesKey = `favoriteShops_${userId}`;\n  localStorage.setItem(favoritesKey, JSON.stringify(favorites));\n};\nconst addToFavorites = shop => {\n  const userId = getCurrentUserId();\n  if (!userId) {\n    console.warn(\"No user logged in\");\n    return false;\n  }\n  const favorites = getFavorites();\n  const isAlreadyFavorite = favorites.some(fav => fav.id === shop.id);\n  if (!isAlreadyFavorite) {\n    const favoriteShop = {\n      id: shop.id,\n      name: shop.name,\n      description: shop.businessAddress,\n      image: shopImages[Math.floor(Math.random() * shopImages.length)],\n      rating: shop.rating,\n      category: Object.keys(shop.mainCategory)[0] || \"General\",\n      totalItems: shop.totalItems,\n      deliveryTime: shop.deliveryTime\n    };\n    const updatedFavorites = [...favorites, favoriteShop];\n    saveFavorites(updatedFavorites);\n    return true;\n  }\n  return false;\n};\nconst removeFromFavorites = shopId => {\n  const favorites = getFavorites();\n  const updatedFavorites = favorites.filter(fav => fav.id !== shopId);\n  saveFavorites(updatedFavorites);\n};\nconst isShopFavorite = shopId => {\n  const favorites = getFavorites();\n  return favorites.some(fav => fav.id === shopId);\n};\nconst [showOrderModal, setShowOrderModal] = useState(false);\nconst onConfirmOrder = () => {\n  setShowOrderModal(true);\n};\nconst handleOrderSuccess = orderData => {\n  setShowOrderModal(false);\n  // Show success message\n  alert(`Order placed successfully! Order ID: ${orderData.orderId}`);\n  // Clear cart or redirect\n};\nfunction OrderReceipt({\n  cart,\n  shopName,\n  onClose,\n  onConfirmOrder\n}) {\n  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"receipt-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"receipt-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"receipt-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Order Summary - \", shopName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"receipt-close-btn\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"receipt-items\",\n        children: cart.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"receipt-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"receipt-item-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"receipt-item-name\",\n              children: item.itemName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"receipt-item-quantity\",\n              children: [\"\\xD7 \", item.quantity]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"receipt-item-price\",\n            children: [\"Rs \", (item.price * item.quantity).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this)]\n        }, item._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"receipt-total\",\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Total:Rs \", total.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"receipt-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"receipt-cancel-btn\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirmOrder,\n          className: \"receipt-confirm-btn\",\n          children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 13\n          }, this), \"Confirm Order\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n}\n_c = OrderReceipt;\nfunction MenuItem({\n  item,\n  onUpdateCart,\n  cartQuantity\n}) {\n  const handleIncrement = () => {\n    onUpdateCart(item, cartQuantity + 1);\n  };\n  const handleDecrement = () => {\n    if (cartQuantity > 0) {\n      onUpdateCart(item, cartQuantity - 1);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"menu-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu-item-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"menu-item-name\",\n        children: item.itemName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"menu-item-description\",\n        children: item.description || \"No description available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu-item-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"menu-item-price\",\n          children: [\"Rs \", item.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"menu-item-category\",\n          children: item.category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), !item.availability && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"menu-item-unavailable\",\n          children: \"Unavailable\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), item.availability && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-cart-item-quantity-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buyer-quantity-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDecrement,\n          className: \"buyer-quantity-btn\",\n          disabled: cartQuantity === 0,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-solid fa-minus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"buyer-quantity-display\",\n          children: cartQuantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleIncrement,\n          className: \"buyer-quantity-btn\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa-solid fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 437,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MenuItem;\nfunction ShopCard({\n  shop,\n  onFavoriteUpdate\n}) {\n  _s();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [cart, setCart] = useState([]);\n  const [showReceipt, setShowReceipt] = useState(false);\n\n  // Get random image for shop\n  const shopImage = shopImages[Math.floor(Math.random() * shopImages.length)];\n\n  // Check if shop is favorite on component mount\n  useEffect(() => {\n    setIsFavorite(isShopFavorite(shop.id));\n  }, [shop.id]);\n  const handleFavoriteClick = e => {\n    e.stopPropagation();\n    const userId = getCurrentUserId();\n    if (!userId) {\n      // Show login required message\n      const notification = document.createElement(\"div\");\n      notification.className = \"favorite-notification\";\n      notification.textContent = \"Please log in to add favorites!\";\n      notification.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: #ef4444;\n                color: white;\n                padding: 12px 20px;\n                border-radius: 8px;\n                z-index: 1000;\n                animation: slideIn 0.3s ease-out;\n            `;\n      document.body.appendChild(notification);\n      setTimeout(() => {\n        notification.remove();\n      }, 3000);\n      return;\n    }\n    if (isFavorite) {\n      // Remove from favorites\n      removeFromFavorites(shop.id);\n      setIsFavorite(false);\n      if (onFavoriteUpdate) onFavoriteUpdate();\n\n      // Show removed message\n      const notification = document.createElement(\"div\");\n      notification.className = \"favorite-notification\";\n      notification.textContent = `${shop.name} removed from favorites!`;\n      notification.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: #ef4444;\n                color: white;\n                padding: 12px 20px;\n                border-radius: 8px;\n                z-index: 1000;\n                animation: slideIn 0.3s ease-out;\n            `;\n      document.body.appendChild(notification);\n      setTimeout(() => {\n        notification.remove();\n      }, 3000);\n    } else {\n      // Add to favorites\n      const success = addToFavorites(shop);\n      if (success) {\n        setIsFavorite(true);\n        if (onFavoriteUpdate) onFavoriteUpdate();\n        // Show success message\n        const notification = document.createElement(\"div\");\n        notification.className = \"favorite-notification\";\n        notification.textContent = `${shop.name} added to favorites!`;\n        notification.style.cssText = `\n                    position: fixed;\n                    top: 20px;\n                    right: 20px;\n                    background: #10b981;\n                    color: white;\n                    padding: 12px 20px;\n                    border-radius: 8px;\n                    z-index: 1000;\n                    animation: slideIn 0.3s ease-out;\n                `;\n        document.body.appendChild(notification);\n        setTimeout(() => {\n          notification.remove();\n        }, 3000);\n      }\n    }\n  };\n  const handleUpdateCart = (item, quantity) => {\n    if (quantity === 0) {\n      setCart(cart.filter(cartItem => cartItem._id !== item._id));\n    } else {\n      const existingItem = cart.find(cartItem => cartItem._id === item._id);\n      if (existingItem) {\n        setCart(cart.map(cartItem => cartItem._id === item._id ? {\n          ...cartItem,\n          quantity\n        } : cartItem));\n      } else {\n        setCart([...cart, {\n          ...item,\n          quantity\n        }]);\n      }\n    }\n  };\n  const getCartQuantity = itemId => {\n    const cartItem = cart.find(item => item._id === itemId);\n    return cartItem ? cartItem.quantity : 0;\n  };\n  const toggleMenu = () => {\n    setShowMenu(!showMenu);\n    if (!showMenu) {\n      setCart([]); // Reset cart when opening menu\n    }\n  };\n  const handleOrderClick = () => {\n    if (cart.length > 0) {\n      setShowReceipt(true);\n    }\n  };\n  const handleAddToCart = () => {\n    const userId = getCurrentUserId();\n    if (!userId) {\n      alert(\"Please log in to add to cart.\");\n      return;\n    }\n    const cartKey = `cart_${userId}`;\n    const existingCart = JSON.parse(localStorage.getItem(cartKey)) || [];\n    const updatedCart = [...existingCart];\n    cart.forEach(item => {\n      const index = updatedCart.findIndex(ci => ci._id === item._id);\n      if (index > -1) {\n        updatedCart[index].quantity += item.quantity;\n      } else {\n        updatedCart.push({\n          ...item\n        });\n      }\n    });\n    localStorage.setItem(cartKey, JSON.stringify(updatedCart));\n    alert(\"Items added to your cart!\");\n  };\n  const handleConfirmOrder = () => {\n    const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    alert(`Order confirmed for ${shop.name}!\\nTotal: ₹${total.toFixed(2)}\\nItems: ${cart.length}`);\n    setCart([]);\n    setShowReceipt(false);\n    setShowMenu(false);\n  };\n  const cartItemCount = cart.reduce((sum, item) => sum + item.quantity, 0);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-shop-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buyer-shop-image-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: shopImage,\n          alt: shop.name,\n          className: \"buyer-shop-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buyer-shop-tags\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"buyer-shop-tag\",\n            children: [shop.totalItems, \" items\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 13\n          }, this), Object.keys(shop.mainCategory).length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"buyer-shop-tag\",\n            children: Object.keys(shop.mainCategory)[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: handleFavoriteClick,\n          className: \"buyer-shop-favorite\",\n          title: isFavorite ? \"Remove from favorites\" : \"Add to favorites\",\n          children: /*#__PURE__*/_jsxDEV(Heart, {\n            className: \"buyer-favorite-icon\",\n            fill: isFavorite ? \"#f44336\" : \"none\",\n            color: isFavorite ? \"#f44336\" : \"white\",\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buyer-shop-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buyer-shop-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"buyer-shop-name\",\n            children: shop.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"buyer-shop-category\",\n            children: Object.keys(shop.mainCategory).join(\", \")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buyer-shop-rating\",\n          children: [/*#__PURE__*/_jsxDEV(Star, {\n            className: \"buyer-star-icon\",\n            fill: \"#fbbf24\",\n            color: \"#fbbf24\",\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"buyer-rating-value\",\n            children: shop.rating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"buyer-rating-reviews\",\n            children: [\"(\", shop.reviews, \" reviews)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buyer-shop-meta\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"buyer-shop-location\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              size: 14,\n              className: \"buyer-location-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: shop.businessAddress\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shop-delivery\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa-solid fa-clock buyer-delivery-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: shop.deliveryTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 693,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buyer-shop-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buyer-shop-visit-button\",\n            onClick: toggleMenu,\n            children: showMenu ? \"Hide Menu\" : \"View Menu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 11\n        }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shop-menu\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"menu-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"menu-title\",\n              children: \"Menu Items\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 17\n            }, this), cartItemCount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart-summary\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-count\",\n                children: [cartItemCount, \" items in cart\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 15\n          }, this), shop.menuItems && shop.menuItems.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"menu-items-list\",\n              children: shop.menuItems.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n                item: item,\n                onUpdateCart: handleUpdateCart,\n                cartQuantity: getCartQuantity(item._id)\n              }, item._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 19\n            }, this), cart.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"menu-footer\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleOrderClick,\n                  className: \"order-summary-btn\",\n                  children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 743,\n                    columnNumber: 27\n                  }, this), \"View Order (\", cartItemCount, \" items)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 739,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"menu-footer\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleAddToCart,\n                  className: \"order-summary-btn\",\n                  style: {\n                    backgroundColor: \"#10b981\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa-solid fa-cart-plus\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 754,\n                    columnNumber: 27\n                  }, this), \" Add to Cart\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 749,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-menu-items\",\n            children: \"No menu items available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 7\n    }, this), showReceipt && /*#__PURE__*/_jsxDEV(OrderReceipt, {\n      cart: cart,\n      shopName: shop.name,\n      onClose: () => setShowReceipt(false),\n      onConfirmOrder: handleConfirmOrder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 9\n    }, this), showOrderModal && /*#__PURE__*/_jsxDEV(OrderConfirmation, {\n      cartItems: cartItems // Your cart items\n      ,\n      shopData: shopData // Shop information\n      ,\n      onOrderSuccess: handleOrderSuccess,\n      onCancel: () => setShowOrderModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(ShopCard, \"WG+8fBmieUTC2PdFT56ch5HvGhA=\");\n_c3 = ShopCard;\nfunction FilterSearch({\n  searchTerm,\n  setSearchTerm,\n  selectedCategory,\n  setSelectedCategory,\n  categories\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"buyer-filter-search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-search-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buyer-search-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Search, {\n          className: \"buyer-search-icon\",\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search shops...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value),\n          className: \"buyer-search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"buyer-filter-button\",\n        children: [/*#__PURE__*/_jsxDEV(Filter, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Filter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-category-filters\",\n      children: categories.map((category, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `category-filter ${selectedCategory === category.name ? \"active\" : \"\"}`,\n        onClick: () => setSelectedCategory(category.name),\n        children: [category.name, \" (\", category.count, \")\"]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 817,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 815,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 797,\n    columnNumber: 5\n  }, this);\n}\n_c4 = FilterSearch;\nfunction ExploreShopsContent() {\n  _s2();\n  const [shops, setShops] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\n  const [categories, setCategories] = useState([{\n    name: \"All\",\n    count: 0\n  }]);\n  const [favoriteUpdateTrigger, setFavoriteUpdateTrigger] = useState(0);\n  const location = useLocation();\n  const shopRefs = useRef({});\n  useEffect(() => {\n    fetchShops();\n  }, []);\n  useEffect(() => {\n    var _location$state;\n    const scrollToShopId = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.scrollToShopId;\n    if (scrollToShopId && shopRefs.current[scrollToShopId]) {\n      shopRefs.current[scrollToShopId].scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\"\n      });\n    }\n  }, [location.state, shops]);\n  const fetchShops = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(\"http://localhost:5000/api/shops\");\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch shops\");\n      }\n      const result = await response.json();\n      if (result.success) {\n        setShops(result.data);\n        generateCategories(result.data);\n      } else {\n        throw new Error(\"API returned error\");\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error(\"Error fetching shops:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const generateCategories = shopsData => {\n    const categoryCount = {};\n    let totalCount = 0;\n    shopsData.forEach(shop => {\n      totalCount++;\n      if (shop.mainCategory && typeof shop.mainCategory === \"object\") {\n        Object.keys(shop.mainCategory).forEach(category => {\n          const categoryName = category.charAt(0).toUpperCase() + category.slice(1);\n          categoryCount[categoryName] = (categoryCount[categoryName] || 0) + 1;\n        });\n      }\n    });\n    const categoryList = [{\n      name: \"All\",\n      count: totalCount\n    }, ...Object.entries(categoryCount).map(([name, count]) => ({\n      name,\n      count\n    }))];\n    setCategories(categoryList);\n  };\n  const handleFavoriteUpdate = () => {\n    setFavoriteUpdateTrigger(prev => prev + 1);\n  };\n  const filteredShops = shops.filter(shop => {\n    const matchesSearch = shop.name.toLowerCase().includes(searchTerm.toLowerCase()) || shop.businessAddress.toLowerCase().includes(searchTerm.toLowerCase());\n    if (selectedCategory === \"All\") {\n      return matchesSearch;\n    }\n    const matchesCategory = shop.mainCategory && Object.keys(shop.mainCategory).some(cat => cat.toLowerCase() === selectedCategory.toLowerCase());\n    return matchesSearch && matchesCategory;\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-explore-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 935,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading shops...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 936,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 934,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 933,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-explore-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Error loading shops\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 946,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchShops,\n          className: \"retry-button\",\n          children: \"Try Again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 948,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 945,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 944,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"buyer-explore-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-explore-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"buyer-explore-title\",\n          children: \"Explore Shops\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 960,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"buyer-explore-subtitle\",\n          children: \"Discover amazing local shops in your campus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 959,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buyer-explore-stats\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"buyer-shops-count\",\n          children: [filteredShops.length, \" shops found\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 966,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 965,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 958,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FilterSearch, {\n      searchTerm: searchTerm,\n      setSearchTerm: setSearchTerm,\n      selectedCategory: selectedCategory,\n      setSelectedCategory: setSelectedCategory,\n      categories: categories\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 972,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-shops-grid\",\n      children: filteredShops.map(shop => /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: el => shopRefs.current[shop.id] = el,\n        children: /*#__PURE__*/_jsxDEV(ShopCard, {\n          shop: shop,\n          onFavoriteUpdate: handleFavoriteUpdate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 983,\n          columnNumber: 13\n        }, this)\n      }, shop.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 982,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 980,\n      columnNumber: 7\n    }, this), filteredShops.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buyer-no-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa-solid fa-search buyer-no-results-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 990,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No shops found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Try adjusting your search terms or category filter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 992,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 989,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 957,\n    columnNumber: 5\n  }, this);\n}\n_s2(ExploreShopsContent, \"xDL3MrTIJarTFKI+cilYq0V1Ntc=\", false, function () {\n  return [useLocation];\n});\n_c5 = ExploreShopsContent;\nexport default ExploreShopsContent;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"OrderReceipt\");\n$RefreshReg$(_c2, \"MenuItem\");\n$RefreshReg$(_c3, \"ShopCard\");\n$RefreshReg$(_c4, \"FilterSearch\");\n$RefreshReg$(_c5, \"ExploreShopsContent\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","Heart","Search","Filter","Star","MapPin","ShoppingCart","Plus","Minus","X","OrderConfirmation","orderService","jsxDEV","_jsxDEV","Fragment","_Fragment","categories1","name","img","shopImages","getCurrentUserId","user","localStorage","getItem","userData","JSON","parse","id","_id","userId","getFavorites","favoritesKey","favorites","saveFavorites","setItem","stringify","addToFavorites","shop","console","warn","isAlreadyFavorite","some","fav","favoriteShop","description","businessAddress","image","Math","floor","random","length","rating","category","Object","keys","mainCategory","totalItems","deliveryTime","updatedFavorites","removeFromFavorites","shopId","filter","isShopFavorite","showOrderModal","setShowOrderModal","onConfirmOrder","handleOrderSuccess","orderData","alert","orderId","OrderReceipt","cart","shopName","onClose","total","reduce","sum","item","price","quantity","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","map","itemName","toFixed","_c","MenuItem","onUpdateCart","cartQuantity","handleIncrement","handleDecrement","availability","disabled","_c2","ShopCard","onFavoriteUpdate","_s","isFavorite","setIsFavorite","showMenu","setShowMenu","setCart","showReceipt","setShowReceipt","shopImage","handleFavoriteClick","e","stopPropagation","notification","document","createElement","textContent","style","cssText","body","appendChild","setTimeout","remove","success","handleUpdateCart","cartItem","existingItem","find","getCartQuantity","itemId","toggleMenu","handleOrderClick","handleAddToCart","cartKey","existingCart","updatedCart","forEach","index","findIndex","ci","push","handleConfirmOrder","cartItemCount","src","alt","title","fill","color","join","reviews","menuItems","backgroundColor","cartItems","shopData","onOrderSuccess","onCancel","_c3","FilterSearch","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","categories","type","placeholder","value","onChange","target","count","_c4","ExploreShopsContent","_s2","shops","setShops","loading","setLoading","error","setError","setCategories","favoriteUpdateTrigger","setFavoriteUpdateTrigger","location","shopRefs","fetchShops","_location$state","scrollToShopId","state","current","scrollIntoView","behavior","block","response","fetch","ok","Error","result","json","data","generateCategories","err","message","shopsData","categoryCount","totalCount","categoryName","charAt","toUpperCase","slice","categoryList","entries","handleFavoriteUpdate","prev","filteredShops","matchesSearch","toLowerCase","includes","matchesCategory","cat","ref","el","_c5","$RefreshReg$"],"sources":["C:/Users/Administrator/Desktop/WAD Project/LocalMart/frontend/src/components/Buyer/buyer-dashboard/ExploreShopsContent.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport {\r\n  Heart,\r\n  Search,\r\n  Filter,\r\n  Star,\r\n  MapPin,\r\n  ShoppingCart,\r\n  Plus,\r\n  Minus,\r\n  X,\r\n} from \"lucide-react\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport OrderConfirmation from \"./OrderConfirmation\";\r\nimport { orderService } from \"../../../services/orderService\";\r\nimport \"../buyer.css\";\r\n\r\nconst categories1 = [\r\n  { name: \"Food\", img: \"https://via.placeholder.com/64\" },\r\n  { name: \"Clothing\", img: \"https://via.placeholder.com/64\" },\r\n  { name: \"Electronics\", img: \"https://via.placeholder.com/64\" },\r\n  { name: \"Books\", img: \"https://via.placeholder.com/64\" },\r\n  { name: \"Crafts\", img: \"https://via.placeholder.com/64\" },\r\n  { name: \"Essentials\", img: \"https://via.placeholder.com/64\" },\r\n];\r\n\r\n// Random shop images\r\nconst shopImages = [\r\n  \"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=300&fit=crop\",\r\n  \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=300&fit=crop\",\r\n  \"https://images.unsplash.com/photo-1552566626-52f8b828add9?w=400&h=300&fit=crop\",\r\n  \"https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=400&h=300&fit=crop\",\r\n  \"https://images.unsplash.com/photo-1559329007-40df8a9345d8?w=400&h=300&fit=crop\",\r\n  \"https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400&h=300&fit=crop\",\r\n  \"https://images.unsplash.com/photo-1537047902294-62a40c20a6ae?w=400&h=300&fit=crop\",\r\n];\r\n\r\n// const OrderConfirmation = ({\r\n//     cartItems,\r\n//     shopData,\r\n//     onOrderSuccess,\r\n//     onCancel\r\n//   }) => {\r\n//     const [loading, setLoading] = useState(false);\r\n//     const [error, setError] = useState('');\r\n\r\n//     // Form state\r\n//     const [deliveryAddress, setDeliveryAddress] = useState({\r\n//       hostelName: '',\r\n//       roomNumber: '',\r\n//       landmark: '',\r\n//       phoneNumber: ''\r\n//     });\r\n\r\n//     const [deliveryTime, setDeliveryTime] = useState('');\r\n//     const [paymentMethod, setPaymentMethod] = useState('cash_on_delivery');\r\n//     const [specialInstructions, setSpecialInstructions] = useState('');\r\n\r\n//     // Calculate totals\r\n//     const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\r\n//     const deliveryFee = subtotal > 200 ? 0 : 20;\r\n//     const totalAmount = subtotal + deliveryFee;\r\n\r\n//     const handleConfirmOrder = async () => {\r\n//       try {\r\n//         setLoading(true);\r\n//         setError('');\r\n\r\n//         // Validate form\r\n//         if (!deliveryAddress.hostelName || !deliveryAddress.roomNumber ||\r\n//             !deliveryAddress.phoneNumber || !deliveryTime) {\r\n//           setError('Please fill in all required fields');\r\n//           return;\r\n//         }\r\n\r\n//         // Prepare order data\r\n//         const orderData = {\r\n//           shopId: shopData._id,\r\n//           items: cartItems.map(item => ({\r\n//             productId: item.productId || item._id,\r\n//             quantity: item.quantity,\r\n//             specialInstructions: item.specialInstructions || ''\r\n//           })),\r\n//           deliveryAddress,\r\n//           deliveryTime,\r\n//           paymentMethod,\r\n//           specialInstructions\r\n//         };\r\n\r\n//         // Create order\r\n//         const result = await orderService.createOrder(orderData);\r\n\r\n//         if (result.success) {\r\n//           onOrderSuccess(result.data);\r\n//         } else {\r\n//           setError(result.message || 'Failed to create order');\r\n//         }\r\n\r\n//       } catch (err) {\r\n//         setError(err.message || 'Something went wrong. Please try again.');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     return (\r\n//       <div className=\"order-confirmation-modal\">\r\n//         <div className=\"modal-content\">\r\n//           <h2>Confirm Your Order</h2>\r\n\r\n//           {error && (\r\n//             <div className=\"error-message\">\r\n//               {error}\r\n//             </div>\r\n//           )}\r\n\r\n//           {/* Order Summary */}\r\n//           <div className=\"order-summary\">\r\n//             <h3>Order Summary</h3>\r\n//             <div className=\"shop-info\">\r\n//               <strong>{shopData.name}</strong>\r\n//               <span className=\"category\">{shopData.category}</span>\r\n//             </div>\r\n\r\n//             <div className=\"items-list\">\r\n//               {cartItems.map((item, index) => (\r\n//                 <div key={index} className=\"order-item\">\r\n//                   <span className=\"item-name\">{item.name}</span>\r\n//                   <span className=\"item-details\">\r\n//                     {item.quantity} × ₹{item.price} = ₹{item.quantity * item.price}\r\n//                   </span>\r\n//                 </div>\r\n//               ))}\r\n//             </div>\r\n\r\n//             <div className=\"price-breakdown\">\r\n//               <div className=\"price-row\">\r\n//                 <span>Subtotal:</span>\r\n//                 <span>₹{subtotal}</span>\r\n//               </div>\r\n//               <div className=\"price-row\">\r\n//                 <span>Delivery Fee:</span>\r\n//                 <span>₹{deliveryFee}</span>\r\n//               </div>\r\n//               <div className=\"price-row total\">\r\n//                 <strong>\r\n//                   <span>Total:</span>\r\n//                   <span>₹{totalAmount}</span>\r\n//                 </strong>\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Delivery Details Form */}\r\n//           <div className=\"delivery-details\">\r\n//             <h3><MapPin size={20} /> Delivery Details</h3>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Hostel Name *</label>\r\n//               <input\r\n//                 type=\"text\"\r\n//                 value={deliveryAddress.hostelName}\r\n//                 onChange={(e) => setDeliveryAddress(prev => ({\r\n//                   ...prev,\r\n//                   hostelName: e.target.value\r\n//                 }))}\r\n//                 placeholder=\"e.g., Hostel A\"\r\n//                 required\r\n//               />\r\n//             </div>\r\n\r\n//             <div className=\"form-row\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Room Number *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   value={deliveryAddress.roomNumber}\r\n//                   onChange={(e) => setDeliveryAddress(prev => ({\r\n//                     ...prev,\r\n//                     roomNumber: e.target.value\r\n//                   }))}\r\n//                   placeholder=\"e.g., 201\"\r\n//                   required\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Phone Number *</label>\r\n//                 <input\r\n//                   type=\"tel\"\r\n//                   value={deliveryAddress.phoneNumber}\r\n//                   onChange={(e) => setDeliveryAddress(prev => ({\r\n//                     ...prev,\r\n//                     phoneNumber: e.target.value\r\n//                   }))}\r\n//                   placeholder=\"Your contact number\"\r\n//                   required\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n\r\n//             <div className=\"form-group\">\r\n//               <label>Landmark (Optional)</label>\r\n//               <input\r\n//                 type=\"text\"\r\n//                 value={deliveryAddress.landmark}\r\n//                 onChange={(e) => setDeliveryAddress(prev => ({\r\n//                   ...prev,\r\n//                   landmark: e.target.value\r\n//                 }))}\r\n//                 placeholder=\"Near library, Ground floor, etc.\"\r\n//               />\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Delivery Time */}\r\n//           <div className=\"delivery-time\">\r\n//             <h3><Clock size={20} /> Preferred Delivery Time</h3>\r\n//             <input\r\n//               type=\"time\"\r\n//               value={deliveryTime}\r\n//               onChange={(e) => setDeliveryTime(e.target.value)}\r\n//               required\r\n//             />\r\n//           </div>\r\n\r\n//           {/* Payment Method */}\r\n//           <div className=\"payment-method\">\r\n//             <h3><CreditCard size={20} /> Payment Method</h3>\r\n//             <div className=\"payment-options\">\r\n//               <label>\r\n//                 <input\r\n//                   type=\"radio\"\r\n//                   value=\"cash_on_delivery\"\r\n//                   checked={paymentMethod === 'cash_on_delivery'}\r\n//                   onChange={(e) => setPaymentMethod(e.target.value)}\r\n//                 />\r\n//                 Cash on Delivery\r\n//               </label>\r\n//               <label>\r\n//                 <input\r\n//                   type=\"radio\"\r\n//                   value=\"upi\"\r\n//                   checked={paymentMethod === 'upi'}\r\n//                   onChange={(e) => setPaymentMethod(e.target.value)}\r\n//                 />\r\n//                 UPI Payment\r\n//               </label>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Special Instructions */}\r\n//           <div className=\"special-instructions\">\r\n//             <h3><FileText size={20} /> Special Instructions (Optional)</h3>\r\n//             <textarea\r\n//               value={specialInstructions}\r\n//               onChange={(e) => setSpecialInstructions(e.target.value)}\r\n//               placeholder=\"Any special requests or instructions for your order...\"\r\n//               rows={3}\r\n//             />\r\n//           </div>\r\n\r\n//           {/* Action Buttons */}\r\n//           <div className=\"action-buttons\">\r\n//             <button\r\n//               onClick={onCancel}\r\n//               className=\"cancel-btn\"\r\n//               disabled={loading}\r\n//             >\r\n//               Cancel\r\n//             </button>\r\n//             <button\r\n//               onClick={handleConfirmOrder}\r\n//               className=\"confirm-btn\"\r\n//               disabled={loading}\r\n//             >\r\n//               {loading ? (\r\n//                 <>\r\n//                   <div className=\"spinner\" />\r\n//                   Creating Order...\r\n//                 </>\r\n//               ) : (\r\n//                 <>\r\n//                   <ShoppingCart size={16} />\r\n//                   Confirm Order - ₹{totalAmount}\r\n//                 </>\r\n//               )}\r\n//             </button>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   };\r\n\r\n// USER-SPECIFIC FAVORITES MANAGEMENT FUNCTIONS\r\nconst getCurrentUserId = () => {\r\n  // Option 1: If you store user info in localStorage\r\n  const user = localStorage.getItem(\"user\");\r\n  if (user) {\r\n    const userData = JSON.parse(user);\r\n    return userData.id || userData._id || userData.userId;\r\n  }\r\n\r\n  // Option 2: If you store just the user ID\r\n  return localStorage.getItem(\"userId\");\r\n\r\n  // Option 3: If you use a different auth system, adjust accordingly\r\n  // return sessionStorage.getItem('userId');\r\n  // return getCurrentUser()?.id; // if using a context or auth hook\r\n};\r\n\r\nconst getFavorites = () => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) return [];\r\n\r\n  const favoritesKey = `favoriteShops_${userId}`;\r\n  const favorites = localStorage.getItem(favoritesKey);\r\n  return favorites ? JSON.parse(favorites) : [];\r\n};\r\n\r\nconst saveFavorites = (favorites) => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) return;\r\n\r\n  const favoritesKey = `favoriteShops_${userId}`;\r\n  localStorage.setItem(favoritesKey, JSON.stringify(favorites));\r\n};\r\n\r\nconst addToFavorites = (shop) => {\r\n  const userId = getCurrentUserId();\r\n  if (!userId) {\r\n    console.warn(\"No user logged in\");\r\n    return false;\r\n  }\r\n\r\n  const favorites = getFavorites();\r\n  const isAlreadyFavorite = favorites.some((fav) => fav.id === shop.id);\r\n\r\n  if (!isAlreadyFavorite) {\r\n    const favoriteShop = {\r\n      id: shop.id,\r\n      name: shop.name,\r\n      description: shop.businessAddress,\r\n      image: shopImages[Math.floor(Math.random() * shopImages.length)],\r\n      rating: shop.rating,\r\n      category: Object.keys(shop.mainCategory)[0] || \"General\",\r\n      totalItems: shop.totalItems,\r\n      deliveryTime: shop.deliveryTime,\r\n    };\r\n    const updatedFavorites = [...favorites, favoriteShop];\r\n    saveFavorites(updatedFavorites);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nconst removeFromFavorites = (shopId) => {\r\n  const favorites = getFavorites();\r\n  const updatedFavorites = favorites.filter((fav) => fav.id !== shopId);\r\n  saveFavorites(updatedFavorites);\r\n};\r\n\r\nconst isShopFavorite = (shopId) => {\r\n  const favorites = getFavorites();\r\n  return favorites.some((fav) => fav.id === shopId);\r\n};\r\n\r\nconst [showOrderModal, setShowOrderModal] = useState(false);\r\n\r\nconst onConfirmOrder = () => {\r\n  setShowOrderModal(true);\r\n};\r\n\r\nconst handleOrderSuccess = (orderData) => {\r\n  setShowOrderModal(false);\r\n  // Show success message\r\n  alert(`Order placed successfully! Order ID: ${orderData.orderId}`);\r\n  // Clear cart or redirect\r\n};\r\nfunction OrderReceipt({ cart, shopName, onClose, onConfirmOrder }) {\r\n  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\r\n\r\n  return (\r\n    <div className=\"receipt-overlay\">\r\n      <div className=\"receipt-modal\">\r\n        <div className=\"receipt-header\">\r\n          <h3>Order Summary - {shopName}</h3>\r\n          <button onClick={onClose} className=\"receipt-close-btn\">\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"receipt-items\">\r\n          {cart.map((item) => (\r\n            <div key={item._id} className=\"receipt-item\">\r\n              <div className=\"receipt-item-info\">\r\n                <span className=\"receipt-item-name\">{item.itemName}</span>\r\n                <span className=\"receipt-item-quantity\">× {item.quantity}</span>\r\n              </div>\r\n              <span className=\"receipt-item-price\">\r\n                Rs {(item.price * item.quantity).toFixed(2)}\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"receipt-total\">\r\n          <strong>Total:Rs {total.toFixed(2)}</strong>\r\n        </div>\r\n\r\n        <div className=\"receipt-actions\">\r\n          <button onClick={onClose} className=\"receipt-cancel-btn\">\r\n            Cancel\r\n          </button>\r\n          <button onClick={onConfirmOrder} className=\"receipt-confirm-btn\">\r\n            <ShoppingCart size={16} />\r\n            Confirm Order\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MenuItem({ item, onUpdateCart, cartQuantity }) {\r\n  const handleIncrement = () => {\r\n    onUpdateCart(item, cartQuantity + 1);\r\n  };\r\n\r\n  const handleDecrement = () => {\r\n    if (cartQuantity > 0) {\r\n      onUpdateCart(item, cartQuantity - 1);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu-item\">\r\n      <div className=\"menu-item-info\">\r\n        <h4 className=\"menu-item-name\">{item.itemName}</h4>\r\n        <p className=\"menu-item-description\">\r\n          {item.description || \"No description available\"}\r\n        </p>\r\n        <div className=\"menu-item-details\">\r\n          <span className=\"menu-item-price\">Rs {item.price}</span>\r\n          <span className=\"menu-item-category\">{item.category}</span>\r\n          {!item.availability && (\r\n            <span className=\"menu-item-unavailable\">Unavailable</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {item.availability && (\r\n        <div className=\"buyer-cart-item-quantity-section\">\r\n          <div className=\"buyer-quantity-controls\">\r\n            <button\r\n              onClick={handleDecrement}\r\n              className=\"buyer-quantity-btn\"\r\n              disabled={cartQuantity === 0}\r\n            >\r\n              <i className=\"fa-solid fa-minus\"></i>\r\n            </button>\r\n            <span className=\"buyer-quantity-display\">{cartQuantity}</span>\r\n            <button onClick={handleIncrement} className=\"buyer-quantity-btn\">\r\n              <i className=\"fa-solid fa-plus\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ShopCard({ shop, onFavoriteUpdate }) {\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const [cart, setCart] = useState([]);\r\n  const [showReceipt, setShowReceipt] = useState(false);\r\n\r\n  // Get random image for shop\r\n  const shopImage = shopImages[Math.floor(Math.random() * shopImages.length)];\r\n\r\n  // Check if shop is favorite on component mount\r\n  useEffect(() => {\r\n    setIsFavorite(isShopFavorite(shop.id));\r\n  }, [shop.id]);\r\n\r\n  const handleFavoriteClick = (e) => {\r\n    e.stopPropagation();\r\n\r\n    const userId = getCurrentUserId();\r\n    if (!userId) {\r\n      // Show login required message\r\n      const notification = document.createElement(\"div\");\r\n      notification.className = \"favorite-notification\";\r\n      notification.textContent = \"Please log in to add favorites!\";\r\n      notification.style.cssText = `\r\n                position: fixed;\r\n                top: 20px;\r\n                right: 20px;\r\n                background: #ef4444;\r\n                color: white;\r\n                padding: 12px 20px;\r\n                border-radius: 8px;\r\n                z-index: 1000;\r\n                animation: slideIn 0.3s ease-out;\r\n            `;\r\n      document.body.appendChild(notification);\r\n      setTimeout(() => {\r\n        notification.remove();\r\n      }, 3000);\r\n      return;\r\n    }\r\n\r\n    if (isFavorite) {\r\n      // Remove from favorites\r\n      removeFromFavorites(shop.id);\r\n      setIsFavorite(false);\r\n      if (onFavoriteUpdate) onFavoriteUpdate();\r\n\r\n      // Show removed message\r\n      const notification = document.createElement(\"div\");\r\n      notification.className = \"favorite-notification\";\r\n      notification.textContent = `${shop.name} removed from favorites!`;\r\n      notification.style.cssText = `\r\n                position: fixed;\r\n                top: 20px;\r\n                right: 20px;\r\n                background: #ef4444;\r\n                color: white;\r\n                padding: 12px 20px;\r\n                border-radius: 8px;\r\n                z-index: 1000;\r\n                animation: slideIn 0.3s ease-out;\r\n            `;\r\n      document.body.appendChild(notification);\r\n      setTimeout(() => {\r\n        notification.remove();\r\n      }, 3000);\r\n    } else {\r\n      // Add to favorites\r\n      const success = addToFavorites(shop);\r\n      if (success) {\r\n        setIsFavorite(true);\r\n        if (onFavoriteUpdate) onFavoriteUpdate();\r\n        // Show success message\r\n        const notification = document.createElement(\"div\");\r\n        notification.className = \"favorite-notification\";\r\n        notification.textContent = `${shop.name} added to favorites!`;\r\n        notification.style.cssText = `\r\n                    position: fixed;\r\n                    top: 20px;\r\n                    right: 20px;\r\n                    background: #10b981;\r\n                    color: white;\r\n                    padding: 12px 20px;\r\n                    border-radius: 8px;\r\n                    z-index: 1000;\r\n                    animation: slideIn 0.3s ease-out;\r\n                `;\r\n        document.body.appendChild(notification);\r\n        setTimeout(() => {\r\n          notification.remove();\r\n        }, 3000);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUpdateCart = (item, quantity) => {\r\n    if (quantity === 0) {\r\n      setCart(cart.filter((cartItem) => cartItem._id !== item._id));\r\n    } else {\r\n      const existingItem = cart.find((cartItem) => cartItem._id === item._id);\r\n      if (existingItem) {\r\n        setCart(\r\n          cart.map((cartItem) =>\r\n            cartItem._id === item._id ? { ...cartItem, quantity } : cartItem\r\n          )\r\n        );\r\n      } else {\r\n        setCart([...cart, { ...item, quantity }]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getCartQuantity = (itemId) => {\r\n    const cartItem = cart.find((item) => item._id === itemId);\r\n    return cartItem ? cartItem.quantity : 0;\r\n  };\r\n\r\n  const toggleMenu = () => {\r\n    setShowMenu(!showMenu);\r\n    if (!showMenu) {\r\n      setCart([]); // Reset cart when opening menu\r\n    }\r\n  };\r\n\r\n  const handleOrderClick = () => {\r\n    if (cart.length > 0) {\r\n      setShowReceipt(true);\r\n    }\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    const userId = getCurrentUserId();\r\n    if (!userId) {\r\n      alert(\"Please log in to add to cart.\");\r\n      return;\r\n    }\r\n\r\n    const cartKey = `cart_${userId}`;\r\n    const existingCart = JSON.parse(localStorage.getItem(cartKey)) || [];\r\n\r\n    const updatedCart = [...existingCart];\r\n\r\n    cart.forEach((item) => {\r\n      const index = updatedCart.findIndex((ci) => ci._id === item._id);\r\n      if (index > -1) {\r\n        updatedCart[index].quantity += item.quantity;\r\n      } else {\r\n        updatedCart.push({ ...item });\r\n      }\r\n    });\r\n\r\n    localStorage.setItem(cartKey, JSON.stringify(updatedCart));\r\n    alert(\"Items added to your cart!\");\r\n  };\r\n\r\n  const handleConfirmOrder = () => {\r\n    const total = cart.reduce(\r\n      (sum, item) => sum + item.price * item.quantity,\r\n      0\r\n    );\r\n    alert(\r\n      `Order confirmed for ${shop.name}!\\nTotal: ₹${total.toFixed(2)}\\nItems: ${\r\n        cart.length\r\n      }`\r\n    );\r\n    setCart([]);\r\n    setShowReceipt(false);\r\n    setShowMenu(false);\r\n  };\r\n\r\n  const cartItemCount = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"buyer-shop-card\">\r\n        <div className=\"buyer-shop-image-container\">\r\n          <img src={shopImage} alt={shop.name} className=\"buyer-shop-image\" />\r\n          <div className=\"buyer-shop-tags\">\r\n            <span className=\"buyer-shop-tag\">{shop.totalItems} items</span>\r\n            {Object.keys(shop.mainCategory).length > 0 && (\r\n              <span className=\"buyer-shop-tag\">\r\n                {Object.keys(shop.mainCategory)[0]}\r\n              </span>\r\n            )}\r\n          </div>\r\n          <div\r\n            onClick={handleFavoriteClick}\r\n            className=\"buyer-shop-favorite\"\r\n            title={isFavorite ? \"Remove from favorites\" : \"Add to favorites\"}\r\n          >\r\n            <Heart\r\n              className=\"buyer-favorite-icon\"\r\n              fill={isFavorite ? \"#f44336\" : \"none\"}\r\n              color={isFavorite ? \"#f44336\" : \"white\"}\r\n              size={20}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"buyer-shop-content\">\r\n          <div className=\"buyer-shop-header\">\r\n            <h3 className=\"buyer-shop-name\">{shop.name}</h3>\r\n            <span className=\"buyer-shop-category\">\r\n              {Object.keys(shop.mainCategory).join(\", \")}\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"buyer-shop-rating\">\r\n            <Star\r\n              className=\"buyer-star-icon\"\r\n              fill=\"#fbbf24\"\r\n              color=\"#fbbf24\"\r\n              size={16}\r\n            />\r\n            <span className=\"buyer-rating-value\">{shop.rating}</span>\r\n            <span className=\"buyer-rating-reviews\">\r\n              ({shop.reviews} reviews)\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"buyer-shop-meta\">\r\n            <div className=\"buyer-shop-location\">\r\n              <MapPin size={14} className=\"buyer-location-icon\" />\r\n              <span>{shop.businessAddress}</span>\r\n            </div>\r\n            <div className=\"shop-delivery\">\r\n              <i className=\"fa-solid fa-clock buyer-delivery-icon\"></i>\r\n              <span>{shop.deliveryTime}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"buyer-shop-actions\">\r\n            <button className=\"buyer-shop-visit-button\" onClick={toggleMenu}>\r\n              {showMenu ? \"Hide Menu\" : \"View Menu\"}\r\n            </button>\r\n          </div>\r\n\r\n          {showMenu && (\r\n            <div className=\"shop-menu\">\r\n              <div className=\"menu-header\">\r\n                <h4 className=\"menu-title\">Menu Items</h4>\r\n                {cartItemCount > 0 && (\r\n                  <div className=\"cart-summary\">\r\n                    <span className=\"cart-count\">\r\n                      {cartItemCount} items in cart\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {shop.menuItems && shop.menuItems.length > 0 ? (\r\n                <>\r\n                  <div className=\"menu-items-list\">\r\n                    {shop.menuItems.map((item) => (\r\n                      <MenuItem\r\n                        key={item._id}\r\n                        item={item}\r\n                        onUpdateCart={handleUpdateCart}\r\n                        cartQuantity={getCartQuantity(item._id)}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n\r\n                  {cart.length > 0 && (\r\n                    <>\r\n                      <div className=\"menu-footer\">\r\n                        <button\r\n                          onClick={handleOrderClick}\r\n                          className=\"order-summary-btn\"\r\n                        >\r\n                          <ShoppingCart size={16} />\r\n                          View Order ({cartItemCount} items)\r\n                        </button>\r\n                      </div>\r\n\r\n                      <div className=\"menu-footer\">\r\n                        <button\r\n                          onClick={handleAddToCart}\r\n                          className=\"order-summary-btn\"\r\n                          style={{ backgroundColor: \"#10b981\" }}\r\n                        >\r\n                          <i className=\"fa-solid fa-cart-plus\"></i> Add to Cart\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <p className=\"no-menu-items\">No menu items available</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {showReceipt && (\r\n        <OrderReceipt\r\n          cart={cart}\r\n          shopName={shop.name}\r\n          onClose={() => setShowReceipt(false)}\r\n          onConfirmOrder={handleConfirmOrder}\r\n        />\r\n      )}\r\n\r\n      {showOrderModal && (\r\n        <OrderConfirmation\r\n          cartItems={cartItems} // Your cart items\r\n          shopData={shopData} // Shop information\r\n          onOrderSuccess={handleOrderSuccess}\r\n          onCancel={() => setShowOrderModal(false)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction FilterSearch({\r\n  searchTerm,\r\n  setSearchTerm,\r\n  selectedCategory,\r\n  setSelectedCategory,\r\n  categories,\r\n}) {\r\n  return (\r\n    <div className=\"buyer-filter-search-container\">\r\n      <div className=\"buyer-search-container\">\r\n        <div className=\"buyer-search-input-wrapper\">\r\n          <Search className=\"buyer-search-icon\" size={20} />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search shops...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"buyer-search-input\"\r\n          />\r\n        </div>\r\n        <button className=\"buyer-filter-button\">\r\n          <Filter size={18} />\r\n          <span>Filter</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"buyer-category-filters\">\r\n        {categories.map((category, index) => (\r\n          <button\r\n            key={index}\r\n            className={`category-filter ${\r\n              selectedCategory === category.name ? \"active\" : \"\"\r\n            }`}\r\n            onClick={() => setSelectedCategory(category.name)}\r\n          >\r\n            {category.name} ({category.count})\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ExploreShopsContent() {\r\n  const [shops, setShops] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\r\n  const [categories, setCategories] = useState([{ name: \"All\", count: 0 }]);\r\n  const [favoriteUpdateTrigger, setFavoriteUpdateTrigger] = useState(0);\r\n\r\n  const location = useLocation();\r\n  const shopRefs = useRef({});\r\n\r\n  useEffect(() => {\r\n    fetchShops();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const scrollToShopId = location.state?.scrollToShopId;\r\n    if (scrollToShopId && shopRefs.current[scrollToShopId]) {\r\n      shopRefs.current[scrollToShopId].scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"start\",\r\n      });\r\n    }\r\n  }, [location.state, shops]);\r\n\r\n  const fetchShops = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(\"http://localhost:5000/api/shops\");\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch shops\");\r\n      }\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setShops(result.data);\r\n        generateCategories(result.data);\r\n      } else {\r\n        throw new Error(\"API returned error\");\r\n      }\r\n    } catch (err) {\r\n      setError(err.message);\r\n      console.error(\"Error fetching shops:\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const generateCategories = (shopsData) => {\r\n    const categoryCount = {};\r\n    let totalCount = 0;\r\n\r\n    shopsData.forEach((shop) => {\r\n      totalCount++;\r\n      if (shop.mainCategory && typeof shop.mainCategory === \"object\") {\r\n        Object.keys(shop.mainCategory).forEach((category) => {\r\n          const categoryName =\r\n            category.charAt(0).toUpperCase() + category.slice(1);\r\n          categoryCount[categoryName] = (categoryCount[categoryName] || 0) + 1;\r\n        });\r\n      }\r\n    });\r\n\r\n    const categoryList = [\r\n      { name: \"All\", count: totalCount },\r\n      ...Object.entries(categoryCount).map(([name, count]) => ({\r\n        name,\r\n        count,\r\n      })),\r\n    ];\r\n\r\n    setCategories(categoryList);\r\n  };\r\n\r\n  const handleFavoriteUpdate = () => {\r\n    setFavoriteUpdateTrigger((prev) => prev + 1);\r\n  };\r\n\r\n  const filteredShops = shops.filter((shop) => {\r\n    const matchesSearch =\r\n      shop.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      shop.businessAddress.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    if (selectedCategory === \"All\") {\r\n      return matchesSearch;\r\n    }\r\n\r\n    const matchesCategory =\r\n      shop.mainCategory &&\r\n      Object.keys(shop.mainCategory).some(\r\n        (cat) => cat.toLowerCase() === selectedCategory.toLowerCase()\r\n      );\r\n\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"buyer-explore-content\">\r\n        <div className=\"loading-container\">\r\n          <div className=\"loading-spinner\"></div>\r\n          <p>Loading shops...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"buyer-explore-content\">\r\n        <div className=\"error-container\">\r\n          <h3>Error loading shops</h3>\r\n          <p>{error}</p>\r\n          <button onClick={fetchShops} className=\"retry-button\">\r\n            Try Again\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"buyer-explore-content\">\r\n      <div className=\"buyer-explore-header\">\r\n        <div>\r\n          <h1 className=\"buyer-explore-title\">Explore Shops</h1>\r\n          <p className=\"buyer-explore-subtitle\">\r\n            Discover amazing local shops in your campus\r\n          </p>\r\n        </div>\r\n        <div className=\"buyer-explore-stats\">\r\n          <span className=\"buyer-shops-count\">\r\n            {filteredShops.length} shops found\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <FilterSearch\r\n        searchTerm={searchTerm}\r\n        setSearchTerm={setSearchTerm}\r\n        selectedCategory={selectedCategory}\r\n        setSelectedCategory={setSelectedCategory}\r\n        categories={categories}\r\n      />\r\n\r\n      <div className=\"buyer-shops-grid\">\r\n        {filteredShops.map((shop) => (\r\n          <div key={shop.id} ref={(el) => (shopRefs.current[shop.id] = el)}>\r\n            <ShopCard shop={shop} onFavoriteUpdate={handleFavoriteUpdate} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {filteredShops.length === 0 && !loading && (\r\n        <div className=\"buyer-no-results\">\r\n          <i className=\"fa-solid fa-search buyer-no-results-icon\"></i>\r\n          <h3>No shops found</h3>\r\n          <p>Try adjusting your search terms or category filter</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ExploreShopsContent;\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SACEC,KAAK,EACLC,MAAM,EACNC,MAAM,EACNC,IAAI,EACJC,MAAM,EACNC,YAAY,EACZC,IAAI,EACJC,KAAK,EACLC,CAAC,QACI,cAAc;AACrB,OAAO,+CAA+C;AACtD,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtB,MAAMC,WAAW,GAAG,CAClB;EAAEC,IAAI,EAAE,MAAM;EAAEC,GAAG,EAAE;AAAiC,CAAC,EACvD;EAAED,IAAI,EAAE,UAAU;EAAEC,GAAG,EAAE;AAAiC,CAAC,EAC3D;EAAED,IAAI,EAAE,aAAa;EAAEC,GAAG,EAAE;AAAiC,CAAC,EAC9D;EAAED,IAAI,EAAE,OAAO;EAAEC,GAAG,EAAE;AAAiC,CAAC,EACxD;EAAED,IAAI,EAAE,QAAQ;EAAEC,GAAG,EAAE;AAAiC,CAAC,EACzD;EAAED,IAAI,EAAE,YAAY;EAAEC,GAAG,EAAE;AAAiC,CAAC,CAC9D;;AAED;AACA,MAAMC,UAAU,GAAG,CACjB,gFAAgF,EAChF,mFAAmF,EACnF,gFAAgF,EAChF,mFAAmF,EACnF,gFAAgF,EAChF,mFAAmF,EACnF,mFAAmF,CACpF;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAC7B;EACA,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACzC,IAAIF,IAAI,EAAE;IACR,MAAMG,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC;IACjC,OAAOG,QAAQ,CAACG,EAAE,IAAIH,QAAQ,CAACI,GAAG,IAAIJ,QAAQ,CAACK,MAAM;EACvD;;EAEA;EACA,OAAOP,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;;EAErC;EACA;EACA;AACF,CAAC;AAED,MAAMO,YAAY,GAAGA,CAAA,KAAM;EACzB,MAAMD,MAAM,GAAGT,gBAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}